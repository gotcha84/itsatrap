#include <sys/socket.h>#include <netinet/in.h>#include <stdio.h>#include <string.h>#include "packet.h"#define SERVER_PORT 5555#define BUFSIZE 512//test testint main(int argc, char**argv){	int sockfd;	struct sockaddr_in myAddress,clientAddress;	socklen_t len;	char msg[BUFSIZE];	// Create UDP socket	sockfd=socket(AF_INET,SOCK_DGRAM,0);	// Set up server address and port	myAddress.sin_family = AF_INET;	myAddress.sin_addr.s_addr=htonl(INADDR_ANY);	myAddress.sin_port=htons(SERVER_PORT);		// Bind server address and port	if (bind(sockfd,(struct sockaddr *)&myAddress,sizeof(myAddress)) < 0)	{		perror("bind failed");		return 1;	}	while(1)	{		len = sizeof(clientAddress);				// Receive a message		if (recvfrom(sockfd,msg,BUFSIZE,0,(struct sockaddr *)&clientAddress,&len) < 0)		{			perror("recvfrom failed");			return 1;		}						struct packet *p = (struct packet *)msg;				// bad because we did not serialize		printf("eventId: %d\n", p->eventId);				if (p->eventId == 1)		{			// Init event			struct initResponsePacket response;			response.eventId = 2;			response.givenPlayerId = 7;						if (sendto(sockfd,&response,sizeof(response),0,(struct sockaddr *)&clientAddress,sizeof(clientAddress)) < 0)			{				perror("sendto failed");				return 1;			}						printf("Response sent\n");		}		else		{				// Echo the message			char buf[BUFSIZE];			memset(buf, 0, BUFSIZE);			sprintf(buf, "I'm server, I received your %s", msg);			if (sendto(sockfd,buf,BUFSIZE,0,(struct sockaddr *)&clientAddress,sizeof(clientAddress)) < 0)			{				perror("sendto failed");				return 1;			}		}	}}